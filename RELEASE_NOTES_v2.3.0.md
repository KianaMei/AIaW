# AIaW 2.3 「大更新」

本次 2.3 版本是一次“面向稳定性与兼容性”的升级，核心围绕「Responses 格式下的 MCP 调用」的兼容修复与行为一致性改进，同时对若干边界场景、日志与可观测性进行了完善，确保在复杂工具调用链路下依旧稳健可用。

## 核心修复
- 修复 Responses API 场景下 MCP 工具调用在 response 格式中的兼容问题（临时修复方案，已充分测试常见模型/Provider 场景）。
- 规范 reasoning + function_call 的配对处理，避免出现“required reasoning item”相关错误。
- 在多段流式输出与工具调用交错的情况下，确保中间状态与最终消息结构一致、可复现。

## 体验与稳定性
- 更加健壮的消息拼装与错误兜底逻辑，降低极端网络/服务波动导致的会话中断概率。
- 增强日志与调试输出，定位工具调用链路问题更直观（不泄露敏感信息）。
- 对部分 Provider 的响应差异做了更好的兼容处理，减少“同提示不同平台行为不一致”的情况。

## 平台构建
- Windows: 保持 Tauri 构建产物（.exe/.msi）并上传到 Release。
- Android: 保持 Capacitor 构建，提供签名与未签名 APK 输出；同时附带 `spa.zip` 与 `src/version.json`。

## 升级指引
- 直接升级至 v2.3.0（建议同时更新到最新的 providers 配置）。
- 若你使用自定义 MCP 服务器，建议在首次升级后通过「开发者工具 → 网络」快速验证工具调用返回符合预期。

## 已知事项
- 本次 MCP 修复为“临时修复”，后续将跟进上游协议/SDK 的进一步统一以获得更彻底的一致性保障。
- 若在极端情况下仍复现兼容性问题，请附上最小复现信息（提示词、Provider、模型名、MCP Server 版本）在 Issue 中反馈。

— 感谢所有使用与反馈的同学！
